eap_java_version: "{{ item.java_version|default(java_default_version) }}"
eap_java_home: "{{ (eap_java_version[0]|int < 9)|ternary( '/usr/java/jdk1.' + eap_java_version|regex_replace('^(\\d+)u(\\d+)$', '\\1.0_\\2'), '/usr/java/jdk-' + eap_java_version ) }}"
eap_instance_name: "{{ item.name }}"
eap_version: "{{ item.eap_version }}"
eap_basedir: "{{ item.eap_basedir|default('/opt') }}"
eap_http_port: "{{ eap_instance_name|regex_replace('[a-zA-Z]+','')|int }}"
eap_port_offset: "{{ item.port_offset|default(0) }}"
eap_version_major: "{{ eap_version.split('.')[0] }}"
eap_cli_base_port: "{{ (eap_version_major|int > 6)|ternary(9990,9999) }}"
eap_cli_port: "{{ eap_cli_base_port|int + eap_port_offset|int }}"
eap_instance_ensure: "{{ item.ensure }}"
eap_instance_status: "{{ item.status }}"
eap_instance_enable: "{{ (eap_instance_ensure == 'present')|ternary(item.enable, False) }}"
eap_archive_name: "jboss-eap-{{ eap_version }}.zip"
eap_version_minor: "{{ eap_version.split('.')[1] }}"
eap_version_patch: "{{ eap_version.split('.')[2] }}"
eap_user: "{{ item.eap_user|default('jboss') }}"
eap_group: "{{ item.eap_group|default('jboss') }}"
eap_jboss_base_dir: "{{ eap_basedir }}/{{ eap_instance_name }}"
eap_jboss_home_dir: "{{ eap_basedir }}/{{ eap_instance_name }}"
eap_module_base_path: "{{ item.module_base_path|default('modules/system/layers/base') }}"
eap_modules: "{{ item.modules|default([]) }}"
eap_gclog: "{{ item.gclog|default('true') }}"
eap_apps: "{{ item.apps|default([]) }}"
eap_jboss_opts: "{{ item.jboss_opts|default([]) }}"
eap_java_opts: "{{ item.java_opts }}"
eap_configuration_xml_name: "{{ item.configuration_xml.name|default('standalone.xml') }}"
eap_configuration_xml_deploy: "{{ item.configuration_xml.deploy|default(False) }}"
eap_configuration_xml_src: "{{ item.configuration_xml.src|default('') }}"
eap_configuration_xml_remote_src: "{{ item.configuration_xml.remote_src|default('no') }}"
eap_configuration_inserts:  "{{ item.configuration_inserts|default([]) }}"
eap_path_sun_jdk_management: "{{ item.path_sun_jdk_management|default('absent') }}"
eap_config_files: "{{ item.config_files|default([]) }}"
eap_starttimeout: "{{ item.starttimeout|default(300) }}"
eap_stoptimeout: "{{ item.stoptimeout|default(60) }}"
eap_maint_stop_delay: "{{ item.maint_stop_delay|default('15m') }}"
eap_ld_library_path: "{{ item.ld_library_path|default([]) }}"
eap_appdynamics: "{{ item.appdynamics|default({}) }}"
eap_appdynamics_ensure: "{{ eap_appdynamics.ensure|default('') }}"
eap_appdynamics_properties: "{{ eap_appdynamics.properties|default({}) }}"
